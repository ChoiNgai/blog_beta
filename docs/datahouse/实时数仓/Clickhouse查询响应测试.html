<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>分区&amp;索引键 | 大数据技术文档</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="./favicon.ico">
    <meta name="description" content="从入门到入土">
    
    <link rel="preload" href="./assets/css/0.styles.e88c5000.css" as="style"><link rel="preload" href="./assets/js/app.8f846374.js" as="script"><link rel="preload" href="./assets/js/2.47c06342.js" as="script"><link rel="preload" href="./assets/js/80.04f05126.js" as="script"><link rel="prefetch" href="./assets/js/10.ef98acb1.js"><link rel="prefetch" href="./assets/js/100.441528ba.js"><link rel="prefetch" href="./assets/js/101.e4e38e24.js"><link rel="prefetch" href="./assets/js/102.c7d8d043.js"><link rel="prefetch" href="./assets/js/103.fab94ea6.js"><link rel="prefetch" href="./assets/js/104.68e04f80.js"><link rel="prefetch" href="./assets/js/105.198c6758.js"><link rel="prefetch" href="./assets/js/106.6258b526.js"><link rel="prefetch" href="./assets/js/107.1585c4c3.js"><link rel="prefetch" href="./assets/js/108.6b62e303.js"><link rel="prefetch" href="./assets/js/109.b2d58d90.js"><link rel="prefetch" href="./assets/js/11.24e5d745.js"><link rel="prefetch" href="./assets/js/110.ded9aecf.js"><link rel="prefetch" href="./assets/js/111.6c292e59.js"><link rel="prefetch" href="./assets/js/112.6c99b5d2.js"><link rel="prefetch" href="./assets/js/113.5bd0fb72.js"><link rel="prefetch" href="./assets/js/114.e9fa34e1.js"><link rel="prefetch" href="./assets/js/115.d1c79025.js"><link rel="prefetch" href="./assets/js/116.350c9554.js"><link rel="prefetch" href="./assets/js/117.92917110.js"><link rel="prefetch" href="./assets/js/118.61f93307.js"><link rel="prefetch" href="./assets/js/119.34185e70.js"><link rel="prefetch" href="./assets/js/12.8b71ea83.js"><link rel="prefetch" href="./assets/js/120.7e1b1c7d.js"><link rel="prefetch" href="./assets/js/121.d8c00252.js"><link rel="prefetch" href="./assets/js/122.174db881.js"><link rel="prefetch" href="./assets/js/13.71347b8e.js"><link rel="prefetch" href="./assets/js/14.f053f94e.js"><link rel="prefetch" href="./assets/js/15.a024878c.js"><link rel="prefetch" href="./assets/js/16.81e7c28f.js"><link rel="prefetch" href="./assets/js/17.f11221ce.js"><link rel="prefetch" href="./assets/js/18.fe832c69.js"><link rel="prefetch" href="./assets/js/19.14c224c1.js"><link rel="prefetch" href="./assets/js/20.fcbc42d2.js"><link rel="prefetch" href="./assets/js/21.07886cc2.js"><link rel="prefetch" href="./assets/js/22.ac5835a0.js"><link rel="prefetch" href="./assets/js/23.5fcce455.js"><link rel="prefetch" href="./assets/js/24.6884809e.js"><link rel="prefetch" href="./assets/js/25.81d9ed9d.js"><link rel="prefetch" href="./assets/js/26.4729386e.js"><link rel="prefetch" href="./assets/js/27.8b2ea903.js"><link rel="prefetch" href="./assets/js/28.ffb9e9e1.js"><link rel="prefetch" href="./assets/js/29.4d4e061f.js"><link rel="prefetch" href="./assets/js/3.6d4ee76d.js"><link rel="prefetch" href="./assets/js/30.649421e8.js"><link rel="prefetch" href="./assets/js/31.b1265e4d.js"><link rel="prefetch" href="./assets/js/32.e19607e8.js"><link rel="prefetch" href="./assets/js/33.f7352c75.js"><link rel="prefetch" href="./assets/js/34.ea398359.js"><link rel="prefetch" href="./assets/js/35.60e46ee5.js"><link rel="prefetch" href="./assets/js/36.7ccb9a0c.js"><link rel="prefetch" href="./assets/js/37.47bf640d.js"><link rel="prefetch" href="./assets/js/38.11987f44.js"><link rel="prefetch" href="./assets/js/39.694eb4c0.js"><link rel="prefetch" href="./assets/js/4.6d1a6719.js"><link rel="prefetch" href="./assets/js/40.5db21ed8.js"><link rel="prefetch" href="./assets/js/41.78eb9a93.js"><link rel="prefetch" href="./assets/js/42.8369c775.js"><link rel="prefetch" href="./assets/js/43.19966b90.js"><link rel="prefetch" href="./assets/js/44.40e6834e.js"><link rel="prefetch" href="./assets/js/45.fbcb566b.js"><link rel="prefetch" href="./assets/js/46.1c3578fb.js"><link rel="prefetch" href="./assets/js/47.8287576d.js"><link rel="prefetch" href="./assets/js/48.317886b4.js"><link rel="prefetch" href="./assets/js/49.1be89a8c.js"><link rel="prefetch" href="./assets/js/5.c4786839.js"><link rel="prefetch" href="./assets/js/50.74e50bd1.js"><link rel="prefetch" href="./assets/js/51.6d431141.js"><link rel="prefetch" href="./assets/js/52.f8793ffe.js"><link rel="prefetch" href="./assets/js/53.ef8ac10b.js"><link rel="prefetch" href="./assets/js/54.72c2b12d.js"><link rel="prefetch" href="./assets/js/55.c35687b6.js"><link rel="prefetch" href="./assets/js/56.394b272d.js"><link rel="prefetch" href="./assets/js/57.08adde98.js"><link rel="prefetch" href="./assets/js/58.ae73d05f.js"><link rel="prefetch" href="./assets/js/59.3c851064.js"><link rel="prefetch" href="./assets/js/6.81b9d3e2.js"><link rel="prefetch" href="./assets/js/60.8c9de55a.js"><link rel="prefetch" href="./assets/js/61.140bed1c.js"><link rel="prefetch" href="./assets/js/62.62ad7beb.js"><link rel="prefetch" href="./assets/js/63.a36440f0.js"><link rel="prefetch" href="./assets/js/64.35625546.js"><link rel="prefetch" href="./assets/js/65.42445eda.js"><link rel="prefetch" href="./assets/js/66.47de6720.js"><link rel="prefetch" href="./assets/js/67.55b1a47f.js"><link rel="prefetch" href="./assets/js/68.f669ae1e.js"><link rel="prefetch" href="./assets/js/69.6d2b7f97.js"><link rel="prefetch" href="./assets/js/7.4a7a55b6.js"><link rel="prefetch" href="./assets/js/70.8c200ec3.js"><link rel="prefetch" href="./assets/js/71.ae918c22.js"><link rel="prefetch" href="./assets/js/72.77638b47.js"><link rel="prefetch" href="./assets/js/73.5820126f.js"><link rel="prefetch" href="./assets/js/74.5b03441d.js"><link rel="prefetch" href="./assets/js/75.1db27768.js"><link rel="prefetch" href="./assets/js/76.b5fec7d3.js"><link rel="prefetch" href="./assets/js/77.ddf1963b.js"><link rel="prefetch" href="./assets/js/78.0573ead9.js"><link rel="prefetch" href="./assets/js/79.89cb870d.js"><link rel="prefetch" href="./assets/js/8.fde5124b.js"><link rel="prefetch" href="./assets/js/81.033f3b11.js"><link rel="prefetch" href="./assets/js/82.4c05f3e6.js"><link rel="prefetch" href="./assets/js/83.55a565c7.js"><link rel="prefetch" href="./assets/js/84.ec4bbf04.js"><link rel="prefetch" href="./assets/js/85.fbfb2605.js"><link rel="prefetch" href="./assets/js/86.d726556c.js"><link rel="prefetch" href="./assets/js/87.cc22e8af.js"><link rel="prefetch" href="./assets/js/88.1cff7c6b.js"><link rel="prefetch" href="./assets/js/89.6def5b33.js"><link rel="prefetch" href="./assets/js/9.e0237b05.js"><link rel="prefetch" href="./assets/js/90.7146fddb.js"><link rel="prefetch" href="./assets/js/91.737708a2.js"><link rel="prefetch" href="./assets/js/92.c85d8205.js"><link rel="prefetch" href="./assets/js/93.828ef430.js"><link rel="prefetch" href="./assets/js/94.4bc2cf6c.js"><link rel="prefetch" href="./assets/js/95.31860134.js"><link rel="prefetch" href="./assets/js/96.25f4a4ac.js"><link rel="prefetch" href="./assets/js/97.9aa011ad.js"><link rel="prefetch" href="./assets/js/98.53797f3a.js"><link rel="prefetch" href="./assets/js/99.20145e16.js">
    <link rel="stylesheet" href="./assets/css/0.styles.e88c5000.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">大数据技术文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><span class="title">编程基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程基础" class="mobile-dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/java基础语法/" class="nav-link">
  Java基础语法
</a></li><li class="dropdown-subitem"><a href="/./coding-base/" class="nav-link">
  Java基础实战
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶(选学)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/java并发编程/java并发编程.html" class="nav-link">
  Java并发编程
</a></li><li class="dropdown-subitem"><a href="/./coding-base/" class="nav-link">
  Java网络编程
</a></li><li class="dropdown-subitem"><a href="/./coding-base/java集合/Java集合（永盛）.html" class="nav-link">
  Java集合
</a></li><li class="dropdown-subitem"><a href="/./coding-base/java虚拟机/" class="nav-link">
  Java虚拟机
</a></li></ul></li><li class="dropdown-item"><h4>
          计算机基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-subitem"><a href="/./coding-base/数据结构与算法/" class="nav-link">
  数据结构（重要）
</a></li><li class="dropdown-subitem"><a href="/./coding-base/计算机网络/计算机网络（双祥）.html" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/./coding-base/操作系统/" class="nav-link">
  操作系统
</a></li></ul></li><li class="dropdown-item"><h4>
          Python（选学）
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/Python/python基础/" class="nav-link">
  Python基础语法
</a></li><li class="dropdown-subitem"><a href="/./coding-base/Python/python库/" class="nav-link">
  Python数据科学库
</a></li></ul></li><li class="dropdown-item"><h4>
          框架（选学）
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/框架/springboot/springboot.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/./coding-base/框架/flask/falsk.html" class="nav-link">
  Flask
</a></li><li class="dropdown-subitem"><a href="/./coding-base/框架/vue/flask.html" class="nav-link">
  Vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/./database/hbase/" class="nav-link">
  HBase
</a></li><li class="dropdown-item"><!----> <a href="/./database/tidb/" class="nav-link">
  TiDB
</a></li><li class="dropdown-item"><!----> <a href="/./database/clickhouse/" class="nav-link">
  ClickHouse
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据仓库" class="dropdown-title"><span class="title">数据仓库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据仓库" class="mobile-dropdown-title"><span class="title">数据仓库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./datahouse/sql/" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/大数据基础/bigdata-base.html" class="nav-link">
  大数据基础
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/离线数仓/" class="nav-link">
  离线数仓
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/实时数仓/" class="nav-link">
  实时数仓
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/广告技术/" class="nav-link">
  广告技术
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/电商业务/" class="nav-link">
  电商业务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据框架及组件" class="dropdown-title"><span class="title">大数据框架及组件</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据框架及组件" class="mobile-dropdown-title"><span class="title">大数据框架及组件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./bigdata/hadoop/" class="nav-link">
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/hive/" class="nav-link">
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/zookeeper/" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/kafka/" class="nav-link">
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/spark/" class="nav-link">
  Spark
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/flink/" class="nav-link">
  Flink
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./other/面经/" class="nav-link">
  面经
</a></li><li class="dropdown-item"><!----> <a href="/./other/机器学习/" class="nav-link">
  机器学习
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/./" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><span class="title">编程基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程基础" class="mobile-dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/java基础语法/" class="nav-link">
  Java基础语法
</a></li><li class="dropdown-subitem"><a href="/./coding-base/" class="nav-link">
  Java基础实战
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶(选学)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/java并发编程/java并发编程.html" class="nav-link">
  Java并发编程
</a></li><li class="dropdown-subitem"><a href="/./coding-base/" class="nav-link">
  Java网络编程
</a></li><li class="dropdown-subitem"><a href="/./coding-base/java集合/Java集合（永盛）.html" class="nav-link">
  Java集合
</a></li><li class="dropdown-subitem"><a href="/./coding-base/java虚拟机/" class="nav-link">
  Java虚拟机
</a></li></ul></li><li class="dropdown-item"><h4>
          计算机基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-subitem"><a href="/./coding-base/数据结构与算法/" class="nav-link">
  数据结构（重要）
</a></li><li class="dropdown-subitem"><a href="/./coding-base/计算机网络/计算机网络（双祥）.html" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/./coding-base/操作系统/" class="nav-link">
  操作系统
</a></li></ul></li><li class="dropdown-item"><h4>
          Python（选学）
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/Python/python基础/" class="nav-link">
  Python基础语法
</a></li><li class="dropdown-subitem"><a href="/./coding-base/Python/python库/" class="nav-link">
  Python数据科学库
</a></li></ul></li><li class="dropdown-item"><h4>
          框架（选学）
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./coding-base/框架/springboot/springboot.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/./coding-base/框架/flask/falsk.html" class="nav-link">
  Flask
</a></li><li class="dropdown-subitem"><a href="/./coding-base/框架/vue/flask.html" class="nav-link">
  Vue
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/./database/hbase/" class="nav-link">
  HBase
</a></li><li class="dropdown-item"><!----> <a href="/./database/tidb/" class="nav-link">
  TiDB
</a></li><li class="dropdown-item"><!----> <a href="/./database/clickhouse/" class="nav-link">
  ClickHouse
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据仓库" class="dropdown-title"><span class="title">数据仓库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据仓库" class="mobile-dropdown-title"><span class="title">数据仓库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./datahouse/sql/" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/大数据基础/bigdata-base.html" class="nav-link">
  大数据基础
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/离线数仓/" class="nav-link">
  离线数仓
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/实时数仓/" class="nav-link">
  实时数仓
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/广告技术/" class="nav-link">
  广告技术
</a></li><li class="dropdown-item"><!----> <a href="/./datahouse/电商业务/" class="nav-link">
  电商业务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据框架及组件" class="dropdown-title"><span class="title">大数据框架及组件</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据框架及组件" class="mobile-dropdown-title"><span class="title">大数据框架及组件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./bigdata/hadoop/" class="nav-link">
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/hive/" class="nav-link">
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/zookeeper/" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/kafka/" class="nav-link">
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/spark/" class="nav-link">
  Spark
</a></li><li class="dropdown-item"><!----> <a href="/./bigdata/flink/" class="nav-link">
  Flink
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./other/面经/" class="nav-link">
  面经
</a></li><li class="dropdown-item"><!----> <a href="/./other/机器学习/" class="nav-link">
  机器学习
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>实时数仓</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./datahouse/实时数仓/实时数仓.html" class="sidebar-link">实时数仓</a></li><li><a href="/./datahouse/%E5%AE%9E%E6%97%B6%E6%95%B0%E4%BB%93/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/./datahouse/实时数仓/CK+TIDB实时多维度OLAP场景应用(1).html" class="sidebar-link">实时读方案</a></li><li><a href="/./datahouse/实时数仓/CK+TIDB实时多维度OLAP场景应用(2).html" class="sidebar-link">ck机器配置</a></li><li><a href="/./datahouse/实时数仓/Clickhouse 读并发压测.html" class="sidebar-link">结果</a></li><li><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html" class="active sidebar-link">分区&amp;索引键</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分区-索引键" class="sidebar-link">分区&amp;索引键</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#test-case1-【条件聚合查询】" class="sidebar-link">Test Case1  【条件聚合查询】</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#条件-分区-dt" class="sidebar-link">条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#条件-分区-dt-主键1-store-id" class="sidebar-link">条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#条件-分区-dt-主键1-store-id-主键2-product-sku" class="sidebar-link">条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#条件-分区-dt-主键1-store-id-主键2-product-sku-主键3-version" class="sidebar-link">条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#条件-分区-dt-主键1-store-id-随机列-boolean类型-2种" class="sidebar-link">条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#条件-分区-dt-主键1-store-id-随机列-国家编码21种" class="sidebar-link">条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#条件-分区-dt-主键1-store-id-随机列-title-10w种" class="sidebar-link">条件</a></li></ul></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#test-case2-【条件-分组聚合查询】" class="sidebar-link">Test Case2  【条件&amp;分组聚合查询】</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分组条件-分区-dt" class="sidebar-link">分组条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#where条件-分区-dt" class="sidebar-link">where条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分组条件-主键1-store-id" class="sidebar-link">分组条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#where条件-分区-dt-主键1-store-id" class="sidebar-link">where条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分组条件-主键2-product-sku" class="sidebar-link">分组条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#where条件-分区-dt-主键1-store-id-主键2-product-sku" class="sidebar-link">where条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分组条件-主键3-version" class="sidebar-link">分组条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#where条件-分区-dt-主键1-store-id-2" class="sidebar-link">where条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分组条件-随机列-boolean2种" class="sidebar-link">分组条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#where条件-分区-dt-主键1-store-id-3" class="sidebar-link">where条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分组条件-随机列-国家编码21种" class="sidebar-link">分组条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#where条件-分区-dt-主键1-store-id-4" class="sidebar-link">where条件</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#分组条件-随机列-title-10w种" class="sidebar-link">分组条件</a></li></ul></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#test-case3-【多分组聚合查询】" class="sidebar-link">Test Case3  【多分组聚合查询】</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#case1-全量数据" class="sidebar-link">Case1:  全量数据</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#case2-30天数据" class="sidebar-link">Case2:30天数据</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#case3-不连续的3天数据" class="sidebar-link">Case3: 不连续的3天数据</a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#-3" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/./datahouse/实时数仓/Clickhouse查询响应测试.html#-4" class="sidebar-link"></a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="分区-索引键"><a href="#分区-索引键" class="header-anchor">#</a> 分区&amp;索引键</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> toDate<span class="token punctuation">(</span>orders_create_time<span class="token punctuation">)</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>store_id<span class="token punctuation">,</span>product_sku<span class="token punctuation">,</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="test-case1-【条件聚合查询】"><a href="#test-case1-【条件聚合查询】" class="header-anchor">#</a> Test Case1  【条件聚合查询】</h2> <h3 id="条件-分区-dt"><a href="#条件-分区-dt" class="header-anchor">#</a> 条件&lt;分区(dt)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31';</td> <td>126</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31';</td> <td>166</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31';</td> <td>218</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31';</td> <td>287</td></tr></tbody></table> <h3 id="条件-分区-dt-主键1-store-id"><a href="#条件-分区-dt-主键1-store-id" class="header-anchor">#</a> 条件&lt;分区(dt)+主键1(store_id)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276';</td> <td>161</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276';</td> <td>132</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276';</td> <td>116</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276';</td> <td>168</td></tr></tbody></table> <h3 id="条件-分区-dt-主键1-store-id-主键2-product-sku"><a href="#条件-分区-dt-主键1-store-id-主键2-product-sku" class="header-anchor">#</a> 条件&lt;分区(dt)+主键1(store_id)+主键2(product_sku)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '17091991';</td> <td>131</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '17091991';</td> <td>115</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '17091991';</td> <td>122</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '17091991';</td> <td>189</td></tr></tbody></table> <p>​</p> <h3 id="条件-分区-dt-主键1-store-id-主键2-product-sku-主键3-version"><a href="#条件-分区-dt-主键1-store-id-主键2-product-sku-主键3-version" class="header-anchor">#</a> 条件&lt;分区(dt)+主键1(store_id)+主键2(product_sku)+主键3(version)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  version from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' and version = '54318268';</td> <td>116</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  version from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' and version = '54318268';</td> <td>163</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  version from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' and version = '54318268';</td> <td>122</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  version from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' and version = '54318268';</td> <td>176</td></tr></tbody></table> <p>​</p> <h3 id="条件-分区-dt-主键1-store-id-随机列-boolean类型-2种"><a href="#条件-分区-dt-主键1-store-id-随机列-boolean类型-2种" class="header-anchor">#</a> 条件&lt;分区(dt)+主键1(store_id)+随机列(boolean类型 2种)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and  valid =1;</td> <td>167</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and  valid =1;</td> <td>202</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and  valid =1;</td> <td>171</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select <em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and  valid =1;</td> <td>317</td></tr></tbody></table> <h3 id="条件-分区-dt-主键1-store-id-随机列-国家编码21种"><a href="#条件-分区-dt-主键1-store-id-随机列-国家编码21种" class="header-anchor">#</a> 条件&lt;分区(dt)+主键1(store_id)+随机列(国家编码21种)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and orders_receiver_country_code ='DZ';</td> <td>155</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and orders_receiver_country_code ='DZ';</td> <td>268</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and orders_receiver_country_code ='DZ';</td> <td>181</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and orders_receiver_country_code ='DZ';</td> <td>250</td></tr></tbody></table> <h3 id="条件-分区-dt-主键1-store-id-随机列-title-10w种"><a href="#条件-分区-dt-主键1-store-id-随机列-title-10w种" class="header-anchor">#</a> 条件&lt;分区(dt)+主键1(store_id)+随机列(title &gt;10w种)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and title = '1Pyoynun1pbxU3IM';</td> <td>219</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and title = '1Pyoynun1pbxU3IM';</td> <td>196</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and title = '1Pyoynun1pbxU3IM';</td> <td>164</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  <em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  and title = '1Pyoynun1pbxU3IM';</td> <td>195</td></tr></tbody></table> <p>​</p> <h2 id="test-case2-【条件-分组聚合查询】"><a href="#test-case2-【条件-分组聚合查询】" class="header-anchor">#</a> Test Case2  【条件&amp;分组聚合查询】</h2> <h3 id="分组条件-分区-dt"><a href="#分组条件-分区-dt" class="header-anchor">#</a> 分组条件&lt;分区(dt)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select <em>toDate</em>(orders_create_time),<em>sum</em>(product_num*product_price) from sku_data_all_6  group by <em>toDate</em>(orders_create_time) order by <em>toDate</em>(orders_create_time) desc limit 10;</td> <td>180</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select <em>toDate</em>(orders_create_time),<em>sum</em>(product_num*product_price) from sku_data_all_7  group by <em>toDate</em>(orders_create_time) order by <em>toDate</em>(orders_create_time) desc limit 10;</td> <td>266</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select <em>toDate</em>(orders_create_time),<em>sum</em>(product_num*product_price) from sku_data_all_8  group by <em>toDate</em>(orders_create_time) order by <em>toDate</em>(orders_create_time) desc limit 10;</td> <td>269</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select <em>toDate</em>(orders_create_time),<em>sum</em>(product_num*product_price) from sku_data_all_9  group by <em>toDate</em>(orders_create_time) order by <em>toDate</em>(orders_create_time) desc limit 10;</td> <td>438</td></tr></tbody></table> <h3 id="where条件-分区-dt"><a href="#where条件-分区-dt" class="header-anchor">#</a> where条件&lt;分区(dt)&gt;</h3> <h3 id="分组条件-主键1-store-id"><a href="#分组条件-主键1-store-id" class="header-anchor">#</a> 分组条件&lt;主键1(store_id)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select store_id, <em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by  store_id ;</td> <td>553</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select store_id, <em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by  store_id ;</td> <td>184</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select store_id, <em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by  store_id ;</td> <td>405</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select store_id, <em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by  store_id ;</td> <td>399</td></tr></tbody></table> <h3 id="where条件-分区-dt-主键1-store-id"><a href="#where条件-分区-dt-主键1-store-id" class="header-anchor">#</a> where条件&lt;分区(dt)+主键1(store_id)&gt;</h3> <h3 id="分组条件-主键2-product-sku"><a href="#分组条件-主键2-product-sku" class="header-anchor">#</a> 分组条件&lt;主键2(product_sku)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select product_sku ,<em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' group by product_sku order by product_sku limit 10;</td> <td>282</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select product_sku ,<em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' group by product_sku order by product_sku limit 10;</td> <td>135</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select product_sku ,<em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' group by product_sku order by product_sku limit 10;</td> <td>142</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select product_sku ,<em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' group by product_sku order by product_sku limit 10;</td> <td>391</td></tr></tbody></table> <p>​</p> <h3 id="where条件-分区-dt-主键1-store-id-主键2-product-sku"><a href="#where条件-分区-dt-主键1-store-id-主键2-product-sku" class="header-anchor">#</a> where条件&lt;分区(dt)+主键1(store_id)+主键2(product_sku)&gt;</h3> <h3 id="分组条件-主键3-version"><a href="#分组条件-主键3-version" class="header-anchor">#</a> 分组条件&lt;主键3(version)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  version,<em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' group by version;</td> <td>137</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  version,<em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' group by version;</td> <td>133</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  version,<em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' group by version;</td> <td>131</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  version,<em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276' and product_sku = '65822989' group by version;</td> <td>182</td></tr></tbody></table> <p>​</p> <h3 id="where条件-分区-dt-主键1-store-id-2"><a href="#where条件-分区-dt-主键1-store-id-2" class="header-anchor">#</a> where条件&lt;分区(dt)+主键1(store_id)&gt;</h3> <h3 id="分组条件-随机列-boolean2种"><a href="#分组条件-随机列-boolean2种" class="header-anchor">#</a> 分组条件&lt;随机列(boolean2种)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  valid,<em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by valid;</td> <td>170</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  valid,<em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by valid;</td> <td>188</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  valid,<em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by valid;</td> <td>139</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  valid,<em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by valid;</td> <td>197</td></tr></tbody></table> <h3 id="where条件-分区-dt-主键1-store-id-3"><a href="#where条件-分区-dt-主键1-store-id-3" class="header-anchor">#</a> where条件&lt;分区(dt)+主键1(store_id)&gt;</h3> <h3 id="分组条件-随机列-国家编码21种"><a href="#分组条件-随机列-国家编码21种" class="header-anchor">#</a> 分组条件&lt;随机列(国家编码21种)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  orders_receiver_country_code,<em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by orders_receiver_country_code;</td> <td>116</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  orders_receiver_country_code,<em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by orders_receiver_country_code;</td> <td>212</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  orders_receiver_country_code,<em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by orders_receiver_country_code;</td> <td>142</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  orders_receiver_country_code,<em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by orders_receiver_country_code;</td> <td>599</td></tr></tbody></table> <h3 id="where条件-分区-dt-主键1-store-id-4"><a href="#where条件-分区-dt-主键1-store-id-4" class="header-anchor">#</a> where条件&lt;分区(dt)+主键1(store_id)&gt;</h3> <h3 id="分组条件-随机列-title-10w种"><a href="#分组条件-随机列-title-10w种" class="header-anchor">#</a> 分组条件&lt;随机列(title &gt;10w种)&gt;</h3> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_6</td> <td>1000W</td> <td>select  title,<em>sum</em>(product_num*product_price) from sku_data_all_6 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by title limit 10;</td> <td>155</td></tr> <tr><td>sku_data_all_7</td> <td>2000W</td> <td>select  title,<em>sum</em>(product_num*product_price) from sku_data_all_7 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by title limit 10;</td> <td>385</td></tr> <tr><td>sku_data_all_8</td> <td>5000W</td> <td>select  title,<em>sum</em>(product_num*product_price) from sku_data_all_8 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by title limit 10;</td> <td>149</td></tr> <tr><td>sku_data_all_9</td> <td>1WW</td> <td>select  title,<em>sum</em>(product_num*product_price) from sku_data_all_9 where <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' and store_id = '1616658704276'  group by title limit 10;</td> <td>427</td></tr></tbody></table> <h2 id="test-case3-【多分组聚合查询】"><a href="#test-case3-【多分组聚合查询】" class="header-anchor">#</a> Test Case3  【多分组聚合查询】</h2> <p>sku_data_all_16 表，一共111623880条数据，单个店铺280w数据，我们随机选择一个店铺进行分组聚合</p> <div class="language-html extra-class"><pre class="language-html"><code>select  count(1) from sku_data_all_16 ;   ---  111623880

store_id			 						count(1)
1610960816048							,2836280
219												,2805303
1620719244112							,2829904
1619441538053							,2821804
1000020										,2847783
1622549990432							,2815256
1615540242447							,2763786
1624086550963							,2810361
1615623722666							,2816810
1619605883188							,2811939
1621071870435							,2856651
1610017174927							,2796665
1615024273244							,2857507
1620302509225							,2811289
1617360990730							,2907138
SL1001_SUBSCRIPTION				,2795719
1619142595804							,2799120
1624243911457							,4150790
1612750032869							,2824190
1617698470493							,2852654
1619441538060							,2837910
1615623722671							,2818022
1615879134392							,2849445
1621850400780							,2836220
1623375144547							,2844561
1626338981776							,2774354
189												,2890343
1606807455448							,2824712
1612282766043							,2812378
1616739234682							,2797334
1617182131582							,2841179
1611129156265							,2790709
1607670909953							,2790014
1618210764532							,2873564
1616658704276							,2837910
1624345481841							,2864564
1626421093392							,2879564
1623137617321							,2864567
1626419062125							,2785581


</code></pre></div><h3 id="case1-全量数据"><a href="#case1-全量数据" class="header-anchor">#</a> Case1:  全量数据</h3> <h4 id="分组条件-主键2"><a href="#分组条件-主键2" class="header-anchor">#</a> 分组条件&lt;主键2&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112'group by order_seq  limit 10;</td> <td>835</td></tr></tbody></table> <h4 id="分组条件-主键3"><a href="#分组条件-主键3" class="header-anchor">#</a> 分组条件&lt;主键3&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  product_sku,<em>sum</em>(product_num*product_price) from sku_data_all_9  where store_id = '1620719244112'group by product_sku  limit 10;</td> <td>918</td></tr></tbody></table> <h4 id="分组条件-主键4"><a href="#分组条件-主键4" class="header-anchor">#</a> 分组条件&lt;主键4&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,<em>sum</em>(product_num*product_price) from sku_data_all_9  where store_id = '1620719244112'group by version  limit 10;</td> <td>918</td></tr></tbody></table> <h4 id="分组条件-主键2-主键3-主键4"><a href="#分组条件-主键2-主键3-主键4" class="header-anchor">#</a> 分组条件&lt;主键2+主键3+主键4&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,product_sku,version,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' group by order_seq,product_sku,version limit 10;</td> <td>442</td></tr></tbody></table> <h4 id="分组条件-主键4-主键3-主键2"><a href="#分组条件-主键4-主键3-主键2" class="header-anchor">#</a> 分组条件&lt;主键4+主键3+主键2&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,product_sku,order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' group by version,product_sku,order_seq limit 10;</td> <td>512</td></tr></tbody></table> <h4 id="分组条件-主键1-主键2-主键3-随机列-boolean2种-国家编码21种"><a href="#分组条件-主键1-主键2-主键3-随机列-boolean2种-国家编码21种" class="header-anchor">#</a> 分组条件&lt;主键1+主键2+主键3+随机列(boolean2种)+国家编码21种)&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,product_sku,version,valid,orders_receiver_country_code,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' group by order_seq,product_sku,version,valid,orders_receiver_country_code limit 10;</td> <td>748</td></tr></tbody></table> <h4 id="分组条件-主键1-主键2-主键3-随机列-boolean2种-随机列-title-10w种"><a href="#分组条件-主键1-主键2-主键3-随机列-boolean2种-随机列-title-10w种" class="header-anchor">#</a> 分组条件&lt;主键1+主键2+主键3+随机列(boolean2种)+随机列(title &gt;10w种)&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,product_sku,version,valid,title,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' group by order_seq,product_sku,version,valid,title limit 10;</td> <td>845</td></tr></tbody></table> <h3 id="case2-30天数据"><a href="#case2-30天数据" class="header-anchor">#</a> Case2:30天数据</h3> <h4 id=""><a href="#" class="header-anchor">#</a></h4> <h4 id="分组条件-主键2-2"><a href="#分组条件-主键2-2" class="header-anchor">#</a> 分组条件&lt;主键2&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by order_seq  limit 10;</td> <td>285</td></tr></tbody></table> <h4 id="分组条件-主键3-2"><a href="#分组条件-主键3-2" class="header-anchor">#</a> 分组条件&lt;主键3&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  product_sku,<em>sum</em>(product_num*product_price) from sku_data_all_9  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by product_sku  limit 10;</td> <td>338</td></tr></tbody></table> <h4 id="分组条件-主键4-2"><a href="#分组条件-主键4-2" class="header-anchor">#</a> 分组条件&lt;主键4&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,<em>sum</em>(product_num*product_price) from sku_data_all_9  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by version  limit 10;</td> <td>350</td></tr></tbody></table> <h4 id="分组条件-主键2-主键3-主键4-2"><a href="#分组条件-主键2-主键3-主键4-2" class="header-anchor">#</a> 分组条件&lt;主键2+主键3+主键4&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,product_sku,version,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by order_seq,product_sku,version limit 10;</td> <td>491</td></tr></tbody></table> <h4 id="分组条件-主键4-主键3-主键2-2"><a href="#分组条件-主键4-主键3-主键2-2" class="header-anchor">#</a> 分组条件&lt;主键4+主键3+主键2&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,product_sku,order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by version,product_sku,order_seq limit 10;</td> <td>512</td></tr></tbody></table> <h4 id="分组条件-主键1-主键2-主键3-随机列-boolean2种-国家编码21种-2"><a href="#分组条件-主键1-主键2-主键3-随机列-boolean2种-国家编码21种-2" class="header-anchor">#</a> 分组条件&lt;主键1+主键2+主键3+随机列(boolean2种)+国家编码21种)&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,product_sku,order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by version,product_sku,order_seq limit 10;</td> <td>580</td></tr></tbody></table> <h4 id="分组条件-主键1-主键2-主键3-随机列-boolean2种-随机列-title-10w种-2"><a href="#分组条件-主键1-主键2-主键3-随机列-boolean2种-随机列-title-10w种-2" class="header-anchor">#</a> 分组条件&lt;主键1+主键2+主键3+随机列(boolean2种)+随机列(title &gt;10w种)&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,product_sku,version,valid,title,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) between '2021-07-01' and '2021-07-31' group by order_seq,product_sku,version,valid,title limit 10;</td> <td>716</td></tr></tbody></table> <h3 id="case3-不连续的3天数据"><a href="#case3-不连续的3天数据" class="header-anchor">#</a> Case3: 不连续的3天数据</h3> <h4 id="-2"><a href="#-2" class="header-anchor">#</a></h4> <h4 id="分组条件-主键2-3"><a href="#分组条件-主键2-3" class="header-anchor">#</a> 分组条件&lt;主键2&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) in ( '2021-07-01' ,'2021-07-05', '2021-07-9' ) group by order_seq  limit 10;</td> <td>155</td></tr></tbody></table> <h4 id="分组条件-主键3-3"><a href="#分组条件-主键3-3" class="header-anchor">#</a> 分组条件&lt;主键3&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  product_sku,<em>sum</em>(product_num*product_price) from sku_data_all_9  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) in ( '2021-07-01' ,'2021-07-05', '2021-07-9' ) group by product_sku  limit 10;</td> <td>123</td></tr></tbody></table> <h4 id="分组条件-主键4-3"><a href="#分组条件-主键4-3" class="header-anchor">#</a> 分组条件&lt;主键4&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,<em>sum</em>(product_num*product_price) from sku_data_all_9  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) in ( '2021-07-01' ,'2021-07-05', '2021-07-9' ) group by version  limit 10;</td> <td>128</td></tr></tbody></table> <h4 id="分组条件-主键2-主键3-主键4-3"><a href="#分组条件-主键2-主键3-主键4-3" class="header-anchor">#</a> 分组条件&lt;主键2+主键3+主键4&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,product_sku,version,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) in ( '2021-07-01' ,'2021-07-05', '2021-07-9' ) group by order_seq,product_sku,version limit 10;</td> <td>159</td></tr></tbody></table> <h4 id="分组条件-主键4-主键3-主键2-3"><a href="#分组条件-主键4-主键3-主键2-3" class="header-anchor">#</a> 分组条件&lt;主键4+主键3+主键2&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,product_sku,order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) in ( '2021-07-01' ,'2021-07-05', '2021-07-9' ) group by version,product_sku,order_seq limit 10;</td> <td>163</td></tr></tbody></table> <h4 id="分组条件-主键1-主键2-主键3-随机列-boolean2种-国家编码21种-3"><a href="#分组条件-主键1-主键2-主键3-随机列-boolean2种-国家编码21种-3" class="header-anchor">#</a> 分组条件&lt;主键1+主键2+主键3+随机列(boolean2种)+国家编码21种)&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  version,product_sku,order_seq,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) in ( '2021-07-01' ,'2021-07-05', '2021-07-9' ) group by version,product_sku,order_seq limit 10;</td> <td></td></tr> <tr><td>�</td> <td>164</td> <td></td> <td></td></tr></tbody></table> <h4 id="分组条件-主键1-主键2-主键3-随机列-boolean2种-随机列-title-10w种-3"><a href="#分组条件-主键1-主键2-主键3-随机列-boolean2种-随机列-title-10w种-3" class="header-anchor">#</a> 分组条件&lt;主键1+主键2+主键3+随机列(boolean2种)+随机列(title &gt;10w种)&gt;</h4> <table><thead><tr><th>表名</th> <th>数据量</th> <th>查询语句</th> <th>RT（ms）</th></tr></thead> <tbody><tr><td>sku_data_all_16</td> <td>1.1亿</td> <td>select  order_seq,product_sku,version,valid,title,<em>sum</em>(product_num*product_price) from sku_data_all_16  where store_id = '1620719244112' and <em>toDate</em>(orders_create_time) in ( '2021-07-01' ,'2021-07-05', '2021-07-9' ) group by order_seq,product_sku,version,valid,title limit 10;</td> <td>196</td></tr></tbody></table> <h3 id="-3"><a href="#-3" class="header-anchor">#</a></h3> <h3 id="-4"><a href="#-4" class="header-anchor">#</a></h3></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/./datahouse/实时数仓/Clickhouse 读并发压测.html" class="prev">
        结果
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.8f846374.js" defer></script><script src="./assets/js/2.47c06342.js" defer></script><script src="./assets/js/80.04f05126.js" defer></script>
  </body>
</html>
